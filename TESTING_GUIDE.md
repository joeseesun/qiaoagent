# 测试指南

## 🚀 快速开始

### 1. 启动服务器

```bash
./start.sh
```

服务器将在 `http://localhost:3001` 启动（如果 3000 端口被占用）。

### 2. 访问地址

- **用户创作界面**: http://localhost:3001
- **管理后台**: http://localhost:3001/admin

### 3. 登录信息

**管理员密码**: `ai_admin_2025`

⚠️ **重要**: 在生产环境中请修改此密码！

---

## 📝 功能测试清单

### ✅ 用户端测试

#### 1. 基本功能测试

- [ ] 访问首页 http://localhost:3001
- [ ] 页面正常加载，显示黑白灰主题
- [ ] 工作流选择器显示两个选项：
  - 科技写作助手
  - 营销文案生成器
- [ ] 主题输入框可以正常输入

#### 2. 内容生成测试

**测试步骤：**

1. 选择工作流："科技写作助手"
2. 输入主题："AI 在教育领域的应用"
3. 点击"开始生成"按钮
4. 观察以下内容：

**预期结果：**

- [ ] 按钮变为"生成中..."并置灰
- [ ] 出现"执行进度"卡片
- [ ] 显示实时进度日志：
  - 🚀 开始执行工作流...
  - 📝 加载工作流配置...
  - 🤖 Agent 信息
  - 📝 任务信息
- [ ] 出现"Agent 思考过程"卡片（紫色边框）
- [ ] 显示不同 Agent 的思考内容
- [ ] 生成完成后显示结果卡片
- [ ] 结果以 Markdown 格式渲染

#### 3. Markdown 渲染测试

生成完成后，检查以下 Markdown 特性是否正确渲染：

- [ ] 标题（H1-H6）正确显示
- [ ] 粗体、斜体文本正确显示
- [ ] 列表（有序/无序）正确显示
- [ ] 代码块有语法高亮
- [ ] 行内代码有红色文本和灰色背景
- [ ] 表格正确显示边框和样式
- [ ] 链接可以点击
- [ ] 引用块有左边框

#### 4. 操作按钮测试

- [ ] 点击"复制"按钮，内容复制到剪贴板
- [ ] 点击"下载 Markdown"按钮，下载 .md 文件
- [ ] 下载的文件包含完整的 Markdown 内容

#### 5. 思考过程测试

- [ ] "Agent 思考过程"卡片显示
- [ ] 按 Agent 分组显示思考内容
- [ ] 每条思考有时间戳
- [ ] 点击"隐藏思考过程"按钮，卡片隐藏
- [ ] 点击"显示思考过程"按钮，卡片重新显示

#### 6. 进度日志测试

检查进度日志中的不同类型：

- [ ] 🚀 任务开始（灰色背景）
- [ ] 🤖 Agent 执行（蓝色背景，旋转动画）
- [ ] 💭 思考过程（紫色背景，脉冲动画）
- [ ] 📝 任务详情（灰色背景）
- [ ] ✅ 阶段性输出（绿色背景）
- [ ] 🎉 完成状态（绿色背景）
- [ ] ❌ 错误信息（红色背景，如有）

---

### ✅ 管理后台测试

#### 1. 登录测试

- [ ] 访问 http://localhost:3001/admin
- [ ] 显示登录界面
- [ ] 输入错误密码，显示错误提示
- [ ] 输入正确密码 `ai_admin_2025`，成功登录
- [ ] 跳转到配置页面

#### 2. 工作流配置测试

**查看配置：**

- [ ] 工作流选择器显示两个工作流
- [ ] 切换工作流，配置内容更新
- [ ] 显示工作流名称和 ID
- [ ] 显示 Agent 列表
- [ ] 显示 Task 列表

**编辑 Agent：**

- [ ] 点击"添加 Agent"按钮
- [ ] 填写 Agent 信息（名称、角色、目标、提示词）
- [ ] 保存后 Agent 列表更新
- [ ] 编辑现有 Agent
- [ ] 删除 Agent

**编辑 Task：**

- [ ] 点击"添加 Task"按钮
- [ ] 填写 Task 信息（描述、执行 Agent）
- [ ] 保存后 Task 列表更新
- [ ] 编辑现有 Task
- [ ] 删除 Task

**保存配置：**

- [ ] 点击"保存配置"按钮
- [ ] 显示成功提示
- [ ] 返回用户端，使用新配置生成内容
- [ ] 新配置立即生效（无需重启）

---

## 🐛 常见问题排查

### 问题 1: 模块未找到错误

**错误信息：**
```
Module not found: Can't resolve 'react-markdown'
```

**解决方法：**
```bash
npm install react-markdown remark-gfm rehype-highlight highlight.js
```

### 问题 2: 生成失败

**可能原因：**
- API Key 无效
- 网络连接问题
- Python 环境问题

**排查步骤：**
1. 检查 `.env` 文件中的 API Key
2. 测试网络连接：`curl https://api.tu-zi.com/v1/models`
3. 检查 Python 依赖：`pip list | grep crewai`

### 问题 3: 思考过程不显示

**可能原因：**
- CrewAI verbose 输出未正确捕获

**当前状态：**
- 使用模拟的思考过程
- 未来版本将实现真实的 Agent 思考捕获

### 问题 4: Markdown 渲染异常

**排查步骤：**
1. 检查浏览器控制台是否有错误
2. 确认 `highlight.js` 样式已加载
3. 检查生成的内容是否为有效 Markdown

---

## 📊 性能测试

### 1. 生成时间测试

**测试方法：**
- 记录从点击"开始生成"到显示结果的时间
- 不同工作流的生成时间可能不同

**预期时间：**
- 科技写作助手：30-60 秒
- 营销文案生成器：30-60 秒

### 2. 并发测试

**测试方法：**
- 打开多个浏览器标签页
- 同时发起生成请求
- 观察是否有冲突或错误

**预期结果：**
- 每个请求独立处理
- 不会相互干扰

---

## 🔒 安全测试

### 1. 管理后台访问控制

- [ ] 未登录时无法访问配置页面
- [ ] 错误密码无法登录
- [ ] 登录后可以正常访问

### 2. API 安全

- [ ] 配置更新需要密码验证
- [ ] 无效密码无法更新配置

---

## 📱 响应式测试

### 桌面端（1920x1080）

- [ ] 页面布局正常
- [ ] 所有元素可见
- [ ] 交互正常

### 平板端（768x1024）

- [ ] 页面自适应
- [ ] 按钮大小合适
- [ ] 文字可读

### 移动端（375x667）

- [ ] 页面自适应
- [ ] 卡片堆叠显示
- [ ] 触摸交互正常

---

## ✅ 验收标准

根据 PRD 的验收标准，确认以下项目：

- [ ] 系统在 Vercel 可正常运行（本地测试通过）
- [ ] 用户可在前台选择工作流并成功生成文章
- [ ] 后台可登录、修改并保存工作流配置
- [ ] CrewAI 运行正常、无报错
- [ ] 前端黑白灰主题统一、美观简洁
- [ ] API Key 使用 tu-zi.com 服务成功
- [ ] 全部功能部署后自动生效，无需手动重启

---

## 📞 获取帮助

如果测试过程中遇到问题：

1. 查看 [FAQ.md](./FAQ.md)
2. 查看 [FEATURE_UPDATES.md](./FEATURE_UPDATES.md)
3. 查看浏览器控制台错误信息
4. 查看服务器终端输出

---

**祝测试顺利！** 🎉

